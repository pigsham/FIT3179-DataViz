{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/pigsham/FIT3179-DataViz/refs/heads/main/FIT3179_A2/data/international-tourist-arrivals-by-region-of-origin.csv"
  },
  "config": {
    "background": "transparent",
    "view": { "stroke": "transparent" }
  },
  "vconcat": [
    {
      "width": 500,
      "height": 250,
      "layer": [
        {
          "mark": "area",
          "params": [
            {
              "name": "highlight",
              "select": {
                "type": "point",
                "on": "mouseover"
              }
            }
          ],
          "transform": [
            {
              "calculate": "datum['International tourist arrivals by region of origin'] / 1e9",
              "as": "Arrivals_in_Billions"
            }
          ],
          "encoding": {
            "x": {
              "field": "Year",
              "type": "temporal",
              "axis": { "title": "Year" },
              "scale": { "domain": {"param": "brush"} }
            },
            "y": {
              "field": "Arrivals_in_Billions",
              "type": "quantitative",
              "axis": {
                "title": "Total Arrivals",
                "format": ".1f",
                "labelExpr": "datum.value + 'B'"
              }
            },
            "color": {
              "field": "Entity",
              "scale": {
                "range": ["#66c2a5", "#fc8d62", "#8da0cb", "#e78ac3", "#a6d854", "#ffd92f", "#e5c494"]
              },
              "title": "Region of Origin",
              "legend": {
                "orient": "right",
                "title": "Region of Origin"
              }
            },
            "tooltip": [
              {
                "field": "Entity",
                "type": "nominal",
                "title": "Region"
              },
              {
                "field": "Year",
                "type": "temporal",
                "title": "Year",
                "timeUnit": "year"
              },
              {
                "field": "Arrivals_in_Billions",
                "type": "quantitative",
                "title": "Total Arrivals (Billions)",
                "format": ".2f"
              }
            ],
            "opacity": {
              "condition": {
                "param": "highlight",
                "value": 0.8
              },
              "value": 0.2
            }
          }
        },
        {
          "mark": { "type": "rule", "color": "black", "strokeDash": [7, 5] },
          "encoding": {
            "x": {
              "datum": { "year": 2020 },
              "type": "temporal"
            }
          }
        },
        {
          "mark": {
            "type": "text",
            "align": "left",
            "dx": -100, 
            "dy": -10, 
            "fontSize": 12,
            "fontWeight": "bold",
            "color": "black"
          },
          "encoding": {
            "x": {
              "datum": { "year": 2020 },
              "type": "temporal"
            },
            "y": {
              "datum": 1.8, 
              "type": "quantitative"
            },
            "text": { "value": "COVID-19 Pandemic" }
          }
        }
      ]
    },
    {
      "width": 500,
      "height": 50,
      "mark": "line",
      "params": [
        {
          "name": "brush",
          "select": { "type": "interval", "encodings": ["x"] }
        }
      ],
      "transform": [
        {
          "calculate": "datum['International tourist arrivals by region of origin'] / 1e9",
          "as": "Arrivals_in_Billions"
        }
      ],
      "encoding": {
        "x": {
          "timeUnit": "year",
          "field": "Year",
          "axis": {
            "format": "%Y",
            "title": "Brush to Filter"
          }
        },
        "y": {
          "field": "Arrivals_in_Billions",
          "type": "quantitative",
          "axis": {
            "title": "Total Arrivals",
            "format": ".1f",
            "labelExpr": "datum.value + 'B'"
          }
        },
        "color": {
          "field": "Entity",
          "scale": {
            "range": ["#66c2a5", "#fc8d62", "#8da0cb", "#e78ac3", "#a6d854", "#ffd92f", "#e5c494"]
          }
        }
      }
    }
  ]
}